<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>{{TITLE}}</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link rel="stylesheet" href="./report.css" />
</head>
<body>
  <header class="container">
    <h1>Validation Report</h1>
    <div class="meta">
      <span>Run ID: <strong>{{RUN_ID}}</strong></span>
      <span>Generated: <strong>{{GENERATED_AT}}</strong></span>
    </div>
  </header>

  <main class="container">
    <section id="summary">
      <h2>Analysis Summary</h2>
      <div class="cards">
        <div class="card"><div class="kpi" id="kpi-passed">--</div><div class="kpi-label">Passed</div></div>
        <div class="card"><div class="kpi" id="kpi-failed">--</div><div class="kpi-label">Failed</div></div>
        <div class="card"><div class="kpi" id="kpi-total-rule-instances">--</div><div class="kpi-label">Total rules</div></div>
        <div class="card"><div class="kpi" id="kpi-success-rate">--</div><div class="kpi-label">Success Rate</div></div>
        <div class="card"><div class="kpi" id="kpi-total-rules">--</div><div class="kpi-label">Applied rule types</div></div>
        <div class="card"><div class="kpi" id="kpi-total-rules-registry">--</div><div class="kpi-label">Available rule types</div></div>
        <div class="card"><div class="kpi" id="kpi-rule-coverage">--</div><div class="kpi-label">Rule Coverage</div></div>
        <div class="card"><div class="kpi" id="kpi-tables-validated">--</div><div class="kpi-label">Tables validated</div></div>
        <div class="card"><div class="kpi" id="kpi-tables-total">--</div><div class="kpi-label">Tables in scope</div></div>
        <div class="card"><div class="kpi" id="kpi-table-coverage">--</div><div class="kpi-label">Table Coverage</div></div>
      </div>
      <div id="rule-application-stats" class="rule-stats-section" style="display: none;">
        <h3>Rule Application Statistics</h3>
        <div id="rule-stats-table"></div>
      </div>
    </section>

    <section id="coverage">
      <h2>Coverage</h2>
      <div id="coverage-matrix"></div>
    </section>

    <section id="details">
      <h2>Details</h2>
      <p>For failed rules, the table shows <strong>schema</strong>, <strong>table</strong> and <strong>column</strong> to speed up debugging.</p>
      <div id="results-table"></div>
    </section>
  </main>

  <footer class="container">
    <small>Generated by egon-validation {{VERSION}}</small>
  </footer>

  <script>
    window.EGON_VALIDATION = {
      resultsUrl: "./results.json",
      coverageUrl: "./coverage.json"
    };
  </script>
  <script src="./report.js"></script>
</body>
</html>
